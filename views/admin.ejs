<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <title>LOGIN</title>
</head>
<body>
    
    <% var user; %>    
    <% for(var i=0; i<customers.length; i++) { %>
          <% if (customers[i].current_user == "True") { %>
            <% user = customers[i]; %>
         <% } %>
    <% } %> 
    <% if(user != null && user.admin == "True") { %>   
<h1 class="jumbotron text-center">Admin Page</h1>   
<a href="/" class="btn btn-outline-primary col-md-3 mt-3">Go back to the home page</a><br>   
<b>Create new account:</b>    
<div class="customers">
    <form action="/customers/create" method="POST">
    <div class="form-group px-2 mt-3">    
    <b>Login Info:</b><br>
        <label class="form-check-label" for="email">Email:</label>
        <input type="email" placeholder="Email" name="email" id="email" class="form-control col-md-3">
        <label class="form-check-label" for="password">Password:</label>
        <input type="password" placeholder="Password" name="password" id="password" class="form-control col-md-3"><br>
    <b>Name:</b><br>
        <label class="form-check-label" for="fname">First name:</label>
        <input type="text" placeholder="First Name" name="fname" id="fname" class="form-control col-md-3">
        <label class="form-check-label" for="lname">Last name:</label>
        <input type="text" placeholder="Last Name" name="lname" id="lname" class="form-control col-md-3"><br>
    <b>Address:</b><br>
        <label class="form-check-label" for="street">Street:</label>    
        <input type="text" placeholder="Street" id="street" name="street" class="form-control col-md-3">
        <label class="form-check-label" for="city">City:</label>     
        <input type="text" placeholder="City" id="city" name="city" class="form-control col-md-3">
        <label class="form-check-label" for="state">State:</label>     
        <input type="text" placeholder="State" id="state" name="state" class="form-control col-md-3">
        <label class="form-check-label" for="zip">Zip Code:</label>     
        <input type="number" placeholder="Zip Code" id="zip" name="zip" class="form-control col-md-3"><br>
    <b>Contact Information:</b><br>
        <label class="form-check-label" for="phone">Phone number:</label> 
        <input type="number" placeholder="Phone Number" name="phone_number" id="phone" class="form-control col-md-3">
        <label class="form-check-label" for="admin">Admin?:</label> 
        <input type="checkbox" placeholder="Admin?" name="admin" id="admin" class="form-control col-md-3"><br>
        <button type="submit" class="btn btn-primary col-md-3 mt-3">Create Account</button>
        </div>
    </form>    

<h2>Accounts:</h2><br>
<div class="container">
  <ol class="customers"><% for(var i=0; i<customers.length; i++) {%>
    <li class="customer">
      <form action="/customers/update" method="POST">
      <b>Login Info:</b>
        <input type="email" placeholder="Email" name="email" value="<%= customers[i].email %>">
        <input type="text" placeholder="Password" name="password" value="<%= customers[i].password %>"><br>
        <input type="text" placeholder="First Name" name="fname" value="<%= customers[i].fname %>">
        <input type="text" placeholder="Last Name" name="lname" value="<%= customers[i].lname %>"><br>
      <b>Address:</b>
        <input type="text" placeholder="Street" name="street" value="<%= customers[i].street %>">
        <input type="text" placeholder="City" name="city" value="<%= customers[i].city %>">
        <input type="text" placeholder="State" name="state" value="<%= customers[i].state %>">
        <input type="number" placeholder="Zip Code" name="zip" value="<%= customers[i].zip %>"><br>
      <b>Contact Information:</b>
        <input type="number" placeholder="Phone Number" name="phone_number" value="<%= customers[i].phone_number %>">
        Admin?<input type="checkbox" placeholder="Admin?" name="admin" <%= customers[i].admin == "True" ? "checked" : "" %>>
      <input type="hidden" name="_id" value="<%= customers[i]._id %>">
      <button type="submit">Update Account</button>
      <a href="/customers/delete/<%= customers[i]._id %>">x</a>
      </form>
    </li> <% } %> 
  </ol>
</div>
    <% } else { %>
        <h1>You do not have permissions to view this page</h1>
        <a href="/">Go back</a>
    <% } %>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>        
</body>
    
</html>